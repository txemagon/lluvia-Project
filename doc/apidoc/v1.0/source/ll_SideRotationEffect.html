<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">SideRotationEffect.prototype = new ThreadAutomata
SideRotationEffect.prototype.constructor = SideRotationEffect
SideRotationEffect.prototype.super = ThreadAutomata

<span id='global-method-'>/**
</span> * [SideRotationEffect description]
 * @param {[type]} view          [description]
 * @param {[type]} angle         [description]
 * @param {[type]} origin        [description]
 * @param {[type]} velocity      [description]
 * @param {[type]} final_coord   [description]
 * @param {[type]} initial_coord [description]
 */
function SideRotationEffect(view, config) {

    var that = this
    if (Object.prototype.toString.call(view) == &quot;[object String]&quot;)
        view = document.getElementById(view)
    this.view = view
    config = config || {}
    this.angle = config.angle
    this.origin = config.origin || [0, 0]
    this.final_coord = config.final_coord || [0, 0]
    this.coord = this.initial_coord = config.initial_coord || [0, 0]
    this.velocity = config.velocity || [20, 20]

    var solicitors = {
        &quot;running&quot;: function(now, before) {
            for (var i = that.coord.length - 1; i &gt;= 0; i--)
                that.coord[i] += that.velocity[i] * (now - before) / 1000

            that.view.style.transform = &#39;rotate(&#39; + that.coord[0] + &#39;deg)&#39;
            that.view.style.transformOrigin = &#39;&#39; + that.origin[0] + &#39;%&#39; + that.origin[1] + &#39;%&#39;
            that.view.style.webkitTransform = &#39;rotate(&#39; + that.coord[0] + &#39;deg)&#39;
            that.view.style.webkitTransformOrigin = &#39;&#39; + that.origin[0] + &#39;%&#39; + that.origin[1] + &#39;%&#39;
            that.view.style.mozTransform = &#39;rotate(&#39; + that.coord[0] + &#39;deg)&#39;
            that.view.style.mozTransformOrigin = &#39;&#39; + that.origin[0] + &#39;%&#39; + that.origin[1] + &#39;%&#39;
            that.view.style.msTransform = &#39;rotate(&#39; + that.coord[0] + &#39;deg)&#39;
            that.view.style.msTransformOrigin = &#39;&#39; + that.origin[0] + &#39;%&#39; + that.origin[1] + &#39;%&#39;
            that.view.style.oTransform = &#39;rotate(&#39; + that.coord[0] + &#39;deg)&#39;
            that.view.style.oTransformOrigin = &#39;&#39; + that.origin[0] + &#39;%&#39; + that.origin[1] + &#39;%&#39;

            if (that.angle &amp;&amp; that.coord[0] &gt;= that.angle)
                that.switch(&quot;stopped&quot;)
        }
    }

    ThreadAutomata.call(this, [&quot;stopped&quot;, &quot;*running&quot;], solicitors)
}</pre>
</body>
</html>
